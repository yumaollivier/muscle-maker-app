<%- include('../includes/head.ejs') %>
<link href="/css/admin/form.css" rel="stylesheet"/>
<link href="/css/admin/card.css" rel="stylesheet"/>
<link href="/css/admin/modal.css" rel="stylesheet"/>
    </head>

    <body>
        <%- include('../includes/banner.ejs') %>
        <div>
            <div class="header">
                <h1 class="bebas-font">
                    <%= pageTitle %>
                </h1>
            </div>
            <% let i = 0 %>
            <% if (exercise.performances.length > 0) { %>
                <% exercise.performances.forEach(perf => { %>
                    <div class="card shadow-effect stat-card">
                        <p class="date">SÃ©ance du <%= perf.date %></p>
                        <% if (trainingNotes) { %>
                            <p class="notes mb-1"><span class="bold">Notes: </span><%= trainingNotes %></p>
                        <% } %>
                        <table class="set-table">
                            <tr class="set-table__header">
                                <th class="set-table__column">SÃ©ries</th>
                                <th class="set-table__column">RÃ©pÃ©titions</th>
                                <th class="set-table__column">Poids (en kg)</th>
                                <th class="set-table__column">Repos (en s)</th>
                                <th class="set-table__column">Notes</th>
                            </tr>
                            <% perf.stats.forEach(stat => { %>
                                <% i++ %>
                                <tr class="set-table__input-field">
                                    <td class="set bebas-font"><%= stat.set %></td>
                                    <td class="reps bebas-font">
                                        <%= stat.reps %>
                                    </td>
                                    <td class="weight bebas-font">
                                        <%= stat.weight %>
                                        <span class="unit">kg</span>
                                    </td>
                                    <td class="rest bebas-font">
                                        <%= stat.rest %> 
                                        <span class="unit">s</span>
                                    </td>
                                    <td class="notes center">
                                        <% if (stat.notes.length > 0) { %>
                                            <svg class="options__icon" data-open="setNote<%= i %>" viewBox="0 0 193 193" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <g clip-path="url(#clip0_243_13)">
                                                    <path d="M169.5 66.7735V168.875L169.375 193H145.25H24.625H0.5V168.875V48.25V24.125H24.625H126.72L103.185 47.0936L24.0781 47.1872L24 170H147L146.5 90.9981L169.5 66.7735ZM167.914 0L159.386 8.52856L184.971 34.1203L193.5 25.5857L167.914 0ZM57.043 110.895L82.6287 136.481L178.086 40.5917L152.5 15L57.043 110.895ZM48.75 144.75L82.6287 136.481L57.043 110.895L48.75 144.75Z" fill="black"/>
                                                </g>
                                                <defs>
                                                    <clipPath id="clip0_243_13">
                                                        <rect width="193" height="193" fill="white"/>
                                                    </clipPath>
                                                </defs>
                                            </svg>
                                            <div class="modal" data-modal="setNote<%= i %>">
                                                <div class="modal-bg" data-close="setNote<%= i %>"></div>
                                                <div class="modal-content">
                                                    <span class="close-modal" data-close="setNote<%= i %>">x</span>
                                                    <div class="modal-container">
                                                        <span class="modal-header">
                                                            <svg class="options__icon mr-.5" data-open="setNote<%= i %>" viewBox="0 0 193 193" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                <g clip-path="url(#clip0_243_13)">
                                                                    <path d="M169.5 66.7735V168.875L169.375 193H145.25H24.625H0.5V168.875V48.25V24.125H24.625H126.72L103.185 47.0936L24.0781 47.1872L24 170H147L146.5 90.9981L169.5 66.7735ZM167.914 0L159.386 8.52856L184.971 34.1203L193.5 25.5857L167.914 0ZM57.043 110.895L82.6287 136.481L178.086 40.5917L152.5 15L57.043 110.895ZM48.75 144.75L82.6287 136.481L57.043 110.895L48.75 144.75Z" fill="black"/>
                                                                </g>
                                                                <defs>
                                                                    <clipPath id="clip0_243_13">
                                                                        <rect width="193" height="193" fill="white"/>
                                                                    </clipPath>
                                                                </defs>
                                                            </svg>
                                                            <h1 class="modal-title bebas-font">Notes pour la sÃ©rie <%= stat.set %></h1>
                                                        </span>
                                                        <div class="modal-text">
                                                            <p class="date">SÃ©ance du <%= perf.date %></p>
                                                            <p><%= stat.notes %></p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        <% } %>
                                    </td>
                                </tr>
                            <% }) %>
                        </table>
                    </div>
                <% }) %>
            <% } else { %>
                <div class="message-container">
                    <p class="message mt-1">Tu n'as pas encore suivi cet exercice. Il n'y a donc aucune performance Ã  afficher. ðŸ˜ž</p>
                </div>
            <% } %>
        </div>
    </body>
    <script src="/js/modal.js"></script>
<%- include('../includes/end.ejs') %>